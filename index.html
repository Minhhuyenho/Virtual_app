<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VirtualStyle - Try On Prototype</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <div class="top-bar">
      <h1>VirtualStyle</h1>
      <div class="top-buttons">
        <button id="captureBtn">ðŸ“· Take Photo</button>
      </div>
    </div>

    <div class="camera-wrap">
      <video id="video" autoplay playsinline></video>
      <canvas id="canvas"></canvas>
      <img id="uploadedImg" style="display: none;" />
      <div class="status" id="status">Initializing face detection...</div>
    </div>

    <div class="controls">
      <div class="action-buttons">
        <button id="saveBtn" class="save-btn">ðŸ’¾ Save Image</button>
        <button id="backToCameraBtn" class="back-btn" style="display: none;">ðŸ“· Back to Camera</button>
      </div>
      <div class="thumbnails">
        <button class="thumb" data-src="assets/glasses.png" data-type="glasses">Glasses</button>
        <button class="thumb" data-src="assets/hat.png" data-type="hat">Hat</button>
        <button class="thumb" data-src="assets/shirt.png" data-type="shirt">Shirt</button>
        <button class="thumb" data-src="" data-type="">Remove</button>
      </div>
      <div class="sliders">
        <label>Size Scale <input id="scale" type="range" min="0.3" max="2.0" step="0.05" value="1.0"></label>
        <label>Vertical Offset <input id="offY" type="range" min="-0.5" max="0.5" step="0.01" value="0.0"></label>
      </div>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
<script>
  // Wait for MediaPipe to load before starting the app
  if (typeof window !== 'undefined') {
    window.addEventListener('load', () => {
      if (typeof FaceMesh === 'undefined') {
        document.getElementById('status').textContent = 'Error loading face detection. Please refresh the page.';
        document.getElementById('status').className = 'status error';
      }
    });
  }
</script>
<script src="app.js"></script>
</body>
</html>
